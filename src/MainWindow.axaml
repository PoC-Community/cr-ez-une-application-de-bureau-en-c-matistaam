<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="clr-namespace:TodoListApp.Models"
        x:Class="TodoListApp.MainWindow"
        Title="âœ¨ Epic Task Master - Your Quest Manager"
        Width="550" Height="750"
        Background="#F0F2F5">
    
    <Window.Styles>
        <Style Selector="Button">
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.2"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Button:pointerover">
            <Setter Property="Opacity" Value="0.85"/>
        </Style>
        <Style Selector="Button:pressed">
            <Setter Property="Opacity" Value="0.7"/>
        </Style>
        <Style Selector="TextBlock[Name=TaskTitleText]">
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="TextBlock[Name=TaskTitleText]:pointerover">
            <Setter Property="TextDecorations" Value="Underline"/>
            <Setter Property="Foreground" Value="#1976D2"/>
        </Style>
        <Style Selector="Border.task-item">
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.3"/>
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="DatePicker">
            <Setter Property="Foreground" Value="#1a1a1a"/>
        </Style>
        <Style Selector="DatePicker /template/ Button">
            <Setter Property="Foreground" Value="#1a1a1a"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>
        <Style Selector="DatePicker /template/ TextBlock">
            <Setter Property="Foreground" Value="#1a1a1a"/>
        </Style>
        <Style Selector="CalendarDatePicker">
            <Setter Property="Foreground" Value="#1a1a1a"/>
        </Style>
        <Style Selector="Calendar">
            <Setter Property="Foreground" Value="#1a1a1a"/>
        </Style>
        <Style Selector="CalendarItem">
            <Setter Property="Foreground" Value="#1a1a1a"/>
        </Style>
        <Style Selector="CalendarDayButton">
            <Setter Property="Foreground" Value="#1a1a1a"/>
        </Style>
    </Window.Styles>

    <StackPanel Margin="20">
        <!-- Fun Header with Gradient Effect -->
        <Border CornerRadius="15" 
                Padding="15" 
                Margin="0,0,0,15">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                    <GradientStop Color="#667eea" Offset="0"/>
                    <GradientStop Color="#764ba2" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="âœ¨ " FontSize="28" VerticalAlignment="Center"/>
                    <TextBlock Text="Epic Task Master" 
                               FontSize="28" 
                               FontWeight="Bold" 
                               Foreground="White"
                               VerticalAlignment="Center"/>
                    <TextBlock Text=" âœ¨" FontSize="28" VerticalAlignment="Center"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5,0,0">
                    <TextBlock x:Name="TaskStatsText" 
                               Text="0 tasks" 
                               FontSize="14" 
                               Foreground="White"
                               Opacity="0.9"/>
                    <TextBlock Text=" â€¢ " 
                               FontSize="14" 
                               Foreground="White"
                               Opacity="0.9"
                               Margin="5,0"/>
                    <TextBlock x:Name="SaveStatusText" 
                               Text="ðŸ’¾ Saved" 
                               FontSize="14" 
                               Foreground="White"
                               Opacity="0.9"
                               ToolTip.Tip="Auto-save enabled"/>
                </StackPanel>
                <!-- Progress Bar -->
                <Border Background="#FFFFFF33" 
                        CornerRadius="10" 
                        Height="10" 
                        Margin="0,10,0,0"
                        ClipToBounds="True">
                    <Border x:Name="ProgressBar"
                            Background="#4CAF50"
                            CornerRadius="10"
                            HorizontalAlignment="Left"
                            MinWidth="0"
                            MaxWidth="500">
                        <Border.Transitions>
                            <Transitions>
                                <DoubleTransition Property="Width" Duration="0:0:0.5"/>
                            </Transitions>
                        </Border.Transitions>
                    </Border>
                </Border>
                <TextBlock x:Name="ProgressText" 
                           Text="0% Complete ðŸŽ¯" 
                           FontSize="12" 
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"
                           Opacity="0.9"/>
            </StackPanel>
        </Border>

        <!-- Add Task Section with Fun Styling -->
        <Border BorderThickness="0" 
                CornerRadius="15" 
                Padding="15" 
                Margin="0,0,0,10">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                    <GradientStop Color="#ffecd2" Offset="0"/>
                    <GradientStop Color="#fcb69f" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <StackPanel>
                <TextBlock Text="âž• Add New Quest" 
                           FontSize="16" 
                           FontWeight="Bold" 
                           Foreground="#2d2d2d"
                           Margin="0,0,0,10"/>
                <TextBox x:Name="TaskInput" 
                         Watermark="What needs to be conquered? ðŸŽ®" 
                         Margin="0,0,0,10"
                         CornerRadius="8"
                         Padding="12"
                         FontSize="14"
                         Background="White"
                         Foreground="#1a1a1a"
                         BorderBrush="#d0d0d0"
                         BorderThickness="2"/>
                <TextBox x:Name="TagsInput" 
                         Watermark="ðŸ·ï¸ Tags (work, fun, urgent...)" 
                         Margin="0,0,0,10"
                         CornerRadius="8"
                         Padding="12"
                         FontSize="14"
                         Background="White"
                         Foreground="#1a1a1a"
                         BorderBrush="#d0d0d0"
                         BorderThickness="2"/>
                <Border Background="White"
                        CornerRadius="8"
                        Padding="10"
                        Margin="0,0,0,10"
                        BorderBrush="#d0d0d0"
                        BorderThickness="2">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ“… Due Date:" 
                                   VerticalAlignment="Center" 
                                   FontSize="14"
                                   FontWeight="Bold"
                                   Foreground="#2d2d2d"
                                   Margin="0,0,10,0"/>
                        <DatePicker x:Name="DueDatePicker"
                                    Background="Transparent"
                                    Foreground="#1a1a1a"
                                    BorderThickness="0"/>
                    </StackPanel>
                </Border>
                <Button x:Name="AddButton" 
                        Content="ðŸš€ Add Quest" 
                        HorizontalAlignment="Stretch" 
                        Height="50"
                        Background="#667eea"
                        Foreground="White"
                        BorderThickness="0"
                        FontSize="16"
                        FontWeight="Bold"
                        CornerRadius="10"
                        Padding="15,12"/>
            </StackPanel>
        </Border>

        <!-- Filter Section with Cool Design -->
        <Border BorderThickness="0" 
                CornerRadius="15" 
                Padding="15" 
                Margin="0,0,0,10">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                    <GradientStop Color="#a8edea" Offset="0"/>
                    <GradientStop Color="#fed6e3" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <StackPanel>
                <TextBlock Text="ðŸ” Quest Filters" 
                           FontWeight="Bold" 
                           FontSize="16"
                           Foreground="#2d2d2d"
                           Margin="0,0,0,10"/>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBox x:Name="FilterTagInput" 
                             Width="200" 
                             Watermark="ðŸ·ï¸ Search by tag..." 
                             Margin="0,0,8,0"
                             CornerRadius="8"
                             Padding="10"
                             FontSize="13"
                             Background="White"
                             Foreground="#1a1a1a"
                             BorderBrush="#d0d0d0"
                             BorderThickness="2"/>
                    <Button x:Name="FilterButton" 
                            Content="âœ“ Apply" 
                            Width="90" 
                            Height="38"
                            Margin="0,0,5,0"
                            FontSize="13"
                            Background="#4CAF50"
                            Foreground="White"
                            FontWeight="Bold"
                            CornerRadius="8"
                            BorderThickness="0"/>
                    <Button x:Name="ClearFilterButton" 
                            Content="âœ• Clear" 
                            Width="90"
                            Height="38"
                            FontSize="13"
                            Background="#FF5722"
                            Foreground="White"
                            FontWeight="Bold"
                            CornerRadius="8"
                            BorderThickness="0"/>
                </StackPanel>
                <WrapPanel>
                    <Button x:Name="FilterTodayButton" 
                            Content="ðŸ“… Today" 
                            Margin="0,0,6,0" 
                            Padding="14,9"
                            Height="40"
                            FontSize="13"
                            FontWeight="Bold"
                            CornerRadius="8"
                            Background="#2196F3"
                            Foreground="White"
                            BorderThickness="0"/>
                    <Button x:Name="FilterWeekButton" 
                            Content="ðŸ“† This Week" 
                            Margin="0,0,6,0" 
                            Padding="14,9"
                            Height="40"
                            FontSize="13"
                            FontWeight="Bold"
                            CornerRadius="8"
                            Background="#9C27B0"
                            Foreground="White"
                            BorderThickness="0"/>
                    <Button x:Name="FilterOverdueButton" 
                            Content="âš ï¸ Overdue" 
                            Margin="0,0,6,0" 
                            Padding="14,9"
                            Height="40"
                            FontSize="13"
                            FontWeight="Bold"
                            CornerRadius="8"
                            Background="#FF9800"
                            Foreground="White"
                            BorderThickness="0"/>
                </WrapPanel>
            </StackPanel>
        </Border>

        <!-- Task List with Awesome Design -->
        <Border Background="White" 
                CornerRadius="15" 
                Padding="12"
                BoxShadow="0 4 20 0 #00000020">
            <ListBox x:Name="TaskList" 
                     Height="260" 
                     SelectionMode="Single"
                     Background="Transparent"
                     BorderThickness="0">
                <ListBox.ItemTemplate>
                    <DataTemplate DataType="models:TaskItem">
                        <Border Classes="task-item"
                                BorderBrush="#E0E0E0" 
                                BorderThickness="1" 
                                CornerRadius="10" 
                                Padding="12" 
                                Margin="4">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                    <GradientStop Color="#f5f7fa" Offset="0"/>
                                    <GradientStop Color="#c3cfe2" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox IsChecked="{Binding IsCompleted}" 
                                              Margin="0,0,12,0"
                                              Click="OnCheckBoxClick"/>
                                    <TextBlock Text="âœ“" 
                                               FontSize="18"
                                               FontWeight="Bold"
                                               Foreground="#4CAF50"
                                               VerticalAlignment="Center"
                                               Margin="0,0,8,0"
                                               IsVisible="{Binding IsCompleted}"/>
                                    <TextBlock x:Name="TaskTitleText"
                                               Text="{Binding Title}" 
                                               VerticalAlignment="Center" 
                                               FontWeight="SemiBold"
                                               FontSize="15"
                                               Foreground="#1a1a1a"
                                               DoubleTapped="OnTaskTitleDoubleTapped"/>
                                    <TextBox x:Name="TaskTitleEdit"
                                             Text="{Binding Title}"
                                             VerticalAlignment="Center"
                                             MinWidth="250"
                                             FontSize="15"
                                             IsVisible="False"
                                             LostFocus="OnTaskTitleEditLostFocus"
                                             KeyDown="OnTaskTitleEditKeyDown"/>
                                    <TextBlock Text=" ðŸ”¥" 
                                               VerticalAlignment="Center" 
                                               Margin="8,0,0,0"
                                               FontSize="18"
                                               IsVisible="{Binding IsOverdue}"/>
                                </StackPanel>
                                <!-- Display due date -->
                                <StackPanel Orientation="Horizontal" 
                                            Margin="28,6,0,0"
                                            IsVisible="{Binding DueDate, Converter={x:Static ObjectConverters.IsNotNull}}">
                                    <TextBlock Text="ðŸ“… " FontSize="13"/>
                                    <TextBlock Text="{Binding DueDateDisplay}" 
                                               FontSize="13"
                                               Foreground="#555555"
                                               FontWeight="Medium"
                                               FontStyle="Italic"/>
                                </StackPanel>
                                <!-- Display tags as chips -->
                                <ItemsControl ItemsSource="{Binding TagsList}" Margin="28,8,0,0">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border CornerRadius="14" 
                                                    Padding="12,5" 
                                                    Margin="0,0,6,6">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                                        <GradientStop Color="#667eea" Offset="0"/>
                                                        <GradientStop Color="#764ba2" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <TextBlock Text="{Binding}" 
                                                           FontSize="12" 
                                                           FontWeight="Bold"
                                                           Foreground="White"/>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>

        <!-- Action Buttons with Fun Colors -->
        <WrapPanel Margin="0,18,0,0" HorizontalAlignment="Center">
            <Button x:Name="DeleteButton" 
                    Content="ðŸ—‘ï¸ Delete" 
                    Width="120" 
                    Height="45"
                    Margin="5"
                    FontSize="14"
                    FontWeight="Bold"
                    CornerRadius="10"
                    Background="#F44336"
                    Foreground="White"
                    BorderThickness="0"
                    Padding="12,10"/>
            <Button x:Name="CompleteAllButton" 
                    Content="âœ“ Complete All" 
                    Width="145" 
                    Height="45"
                    Margin="5"
                    FontSize="14"
                    FontWeight="Bold"
                    CornerRadius="10"
                    Background="#4CAF50"
                    Foreground="White"
                    BorderThickness="0"
                    Padding="12,10"/>
            <Button x:Name="ClearCompletedButton" 
                    Content="ðŸ§¹ Clear Done" 
                    Width="135" 
                    Height="45"
                    Margin="5"
                    FontSize="14"
                    FontWeight="Bold"
                    CornerRadius="10"
                    Background="#E65100"
                    Foreground="White"
                    BorderThickness="0"
                    Padding="12,10"/>
            <Button x:Name="SaveButton" 
                    Content="ðŸ’¾ Save Now" 
                    Width="120" 
                    Height="45"
                    Margin="5"
                    FontSize="14"
                    FontWeight="Bold"
                    CornerRadius="10"
                    Background="#2196F3"
                    Foreground="White"
                    BorderThickness="0"
                    Padding="12,10"/>
        </WrapPanel>
        
        <!-- Fun Footer -->
        <TextBlock x:Name="MotivationText"
                   Text="ðŸ’ª You got this! Keep crushing those goals! ðŸŽ¯"
                   HorizontalAlignment="Center"
                   TextAlignment="Center"
                   TextWrapping="Wrap"
                   MaxWidth="500"
                   FontSize="13"
                   FontWeight="Medium"
                   FontStyle="Italic"
                   Foreground="#555"
                   Margin="0,18,0,5"/>
    </StackPanel>
</Window>
